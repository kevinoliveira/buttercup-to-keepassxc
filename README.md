# buttercup-to-keepassxc
Export passwords, notes and TOTPs from Buttercup to Keepassxc


<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 611.53125 70" style="max-width: 100%;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="graph-div" height="100%"><style>#graph-div{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#graph-div .error-icon{fill:#552222;}#graph-div .error-text{fill:#552222;stroke:#552222;}#graph-div .edge-thickness-normal{stroke-width:1px;}#graph-div .edge-thickness-thick{stroke-width:3.5px;}#graph-div .edge-pattern-solid{stroke-dasharray:0;}#graph-div .edge-thickness-invisible{stroke-width:0;fill:none;}#graph-div .edge-pattern-dashed{stroke-dasharray:3;}#graph-div .edge-pattern-dotted{stroke-dasharray:2;}#graph-div .marker{fill:#333333;stroke:#333333;}#graph-div .marker.cross{stroke:#333333;}#graph-div svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#graph-div p{margin:0;}#graph-div .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#graph-div .cluster-label text{fill:#333;}#graph-div .cluster-label span{color:#333;}#graph-div .cluster-label span p{background-color:transparent;}#graph-div .label text,#graph-div span{fill:#333;color:#333;}#graph-div .node rect,#graph-div .node circle,#graph-div .node ellipse,#graph-div .node polygon,#graph-div .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#graph-div .rough-node .label text,#graph-div .node .label text{text-anchor:middle;}#graph-div .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#graph-div .node .label{text-align:center;}#graph-div .node.clickable{cursor:pointer;}#graph-div .arrowheadPath{fill:#333333;}#graph-div .edgePath .path{stroke:#333333;stroke-width:2.0px;}#graph-div .flowchart-link{stroke:#333333;fill:none;}#graph-div .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#graph-div .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#graph-div .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#graph-div .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#graph-div .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#graph-div .cluster text{fill:#333;}#graph-div .cluster span{color:#333;}#graph-div div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#graph-div .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#graph-div :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="graph-div_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="graph-div_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-thick edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_bcup_b2k_0" d="M113.563,35L123.732,35C133.901,35,154.24,35,169.493,35C184.747,35,194.917,35,204.419,35C213.922,35,222.758,35,227.176,35L231.594,35"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-thick edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_b2k_kpass_1" d="M358.078,35L369.064,35C380.049,35,402.021,35,418.499,35C434.978,35,445.964,35,456.283,35C466.602,35,476.254,35,481.08,35L485.906,35"></path></g><g class="edgeLabels"><g transform="translate(174.578125, 35)" class="edgeLabel"><g transform="translate(-36.015625, -12)" class="label"><foreignObject height="24" width="72.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>&nbsp;input.csv&nbsp;</p></span></div></foreignObject></g></g><g transform="translate(423.9921875, 35)" class="edgeLabel"><g transform="translate(-40.9140625, -12)" class="label"><foreignObject height="24" width="81.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>&nbsp;output.csv&nbsp;</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(60.78125, 35)" id="flowchart-bcup-9999" class="node default"><rect height="54" width="105.5625" y="-27" x="-52.78125" ry="5" data-et="node" data-id="abc" rx="5" style="fill:#00b7ac !important;stroke:#028c84 !important;stroke-width:4px !important" class="basic label-container"></rect><g transform="translate(-37.78125, -12)" style="font-weight:bold !important;color:white !important" class="label"><rect></rect><foreignObject height="24" width="75.5625"><div xmlns="http://www.w3.org/1999/xhtml" style="font-weight: bold !important; color: white !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="font-weight:bold !important;color:white !important"><p>Buttercup</p></span></div></foreignObject></g></g><g transform="translate(296.8359375, 35)" id="flowchart-b2k-10000" class="node default"><rect height="54" width="122.484375" y="-27" x="-61.2421875" ry="5" data-et="node" data-id="abc" rx="5" style="fill:#393939 !important;stroke:black !important;stroke-width:4px !important" class="basic label-container"></rect><g transform="translate(-46.2421875, -12)" style="font-weight:bold !important;color:white !important" class="label"><rect></rect><foreignObject height="24" width="92.484375"><div xmlns="http://www.w3.org/1999/xhtml" style="font-weight: bold !important; color: white !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="font-weight:bold !important;color:white !important"><p>bcup2kpass</p></span></div></foreignObject></g></g><g transform="translate(546.71875, 35)" id="flowchart-kpass-10002" class="node default"><rect height="54" width="113.625" y="-27" x="-56.8125" ry="5" data-et="node" data-id="abc" rx="5" style="fill:#7fb429 !important;stroke:#45862b !important;stroke-width:4px !important" class="basic label-container"></rect><g transform="translate(-41.8125, -12)" style="font-weight:bold !important;color:white !important" class="label"><rect></rect><foreignObject height="24" width="83.625"><div xmlns="http://www.w3.org/1999/xhtml" style="font-weight: bold !important; color: white !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="font-weight:bold !important;color:white !important"><p>Keepassxc</p></span></div></foreignObject></g></g></g></g></g></svg>

## Instructions
1. Unlock your buttercup vault
1. Export your vault to CSV (MENU > Current Vault > Export)
1. Compile the program or download the binary from latest release
    - compile: `bun build ./main.ts --compile --outfile bcup2kpass`
    - download: [releases page](https://github.com/kevinoliveira/buttercup-to-keepassxc/releases)
1. Feed the CSV into the program 
    `./bcup2kpass --input BUTTERCUP_CSV --output KEEPASSXC_CSV`
1. Import the output csv into keepass (MENU > Database > Import)
1. Finish the import wizard as you wish

## Notes
1. This scritpt works as of September 2024, might not work in the future, use at your own risk
1. Nested groups will be flatten
1. Groups with the same name will be merged
1. Groups from Buttercup's trash will be ignored  
1. Any custom fields that begins with `otpauth://` will be exported as TOTP
1. Any other fields that does not qualify as TOTP will be exported as notes using the following pattern
    ```
        FIELD_1_NAME: FIELD_1_CONTENT
        FIELD_2_NAME: FIELD_2_CONTENT
    ```
1. CSV fields are proprely escaped and passwords with commas and double quotes will be properly exported
1. Buttercup does not export dates, therefore 'Created' and 'Last Modified' will be registed as the moment of export
1. Test/Example files are avaliable on ./examples, the password for both buttercup and keepassxc vauts is `banana` 